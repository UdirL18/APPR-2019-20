---
title: "Analiza rezultatov RGI"
author: "Lucija Udir"
output:
  html_document: default
  pdf_document:
    includes:
      in_header: lib/styles.sty
    latex_engine: xelatex
runtime: shiny
---

```{r setup, echo=FALSE, results='hide', message=FALSE, warning=FALSE}
# Če želimo nastaviti pisave v PDF-ju, odkomentiramo
# in sledimo navodilom v programu.
#source("fontconfig.r", encoding="UTF-8")

# Uvoz vseh potrebnih knjižnic
source("lib/libraries.r", encoding="UTF-8")
```

```{r rstudio, echo=FALSE, results='asis'}
# Izris povezave do RStudia na Binderju
source("lib/rstudio.r", encoding="UTF-8")
```
# Analiza rezultatov tekmovanj v ritmični gimnastiki.
## Izbira teme

Ideja projekta je analizirati rezultate svetovnih in evropskih prvenstev v ritmični gimnastiki za induvidualne ter skupinskesestave. 
Primerjala bom ocene posameznih rekvizitov, kot tudi izvedbeno in težavnostno oceno med tekmovalkami in tekmami.
Osredotočila se bom na tri večja tekmovanja:
* ZA INDUVIDUALNE SESTAVE
1. [36th FIG Rhythmic Gymnastics World Championships](https://gym.longinestiming.com/File/0000110101FFFFFFFFFFFFFFFFFFFF03): podatki v obliki CSV, 
2. [37th FIG Rhythmic Gymnastics World Championships](https://gym.longinestiming.com/File/000012000100FFFFFFFFFFFFFFFFFF04): podatki v obliki CSV,
3. [2020 European Championships in Rhythmic Gymnastics](https://backend.europeangymnastics.com/sites/default/files/paragraph/age-group-competition-info/competition-results/SENIORS%20-%20Individual%20-%20All-around%20Final%20AllAroundResultsRg_0.pdf): podatki v obliki CSV.
* ZA SKUPINSKE SESTATVE
1. [37th FIG Rhythmic Gymnastics World Championships](https://en.wikipedia.org/wiki/2019_Rhythmic_Gymnastics_World_Championships); podatki v obliki html,
2. [2020 European Championships in Rhythmic Gymnastics](https://backend.europeangymnastics.com/sites/default/files/paragraph/age-group-competition-info/competition-results/SENIORS%20-%20Group%20-%20Qualification%20AllAroundResultsRg_0.pdf): podatki v obliki CSV.

![](slike/grb.png)

***

## Obdelava, uvoz in čiščenje podatkov

```{r uvoz, echo=FALSE, message=FALSE}
source("uvoz/mojuvoz.R", encoding="UTF-8")
```
**OPOMBA**: Podatki so bili v pdf obliki. Najprej sem pdf datoteko pretvorila v csv datoteko in nato uvozila podatke. Neprečiščeni podatki so vsebovali tudi 10 stolpcev, ki so bili nepotrebni. Tip stolpcev je bil nepravilen. Uvoženi podatki so bili v različnih tabelah, ki sem jih nato združila v eno razpredelnico v obliki *tidy data*.

1. Tabela **wcg**
  - stolpec **"Tekmovalka"**
    -stolpec z imenom in priimkom tekmovalke, tipa character.

  - stolpec **"drzava"**
    -stolpec z kratico države, ki jo tekomovalka zastopa, tipa character.

  -  stolpec **"rekvizit"**
    -stolpec, ki pove s katerim rekvizitom je tekmovalka dobila te ocene, tipa character. Ta stolpec sem dodala ko sem tabele združila ve eno.

  - stolpec  **"tekma"**
    -stolpec, ki pove na kateri tekmi je tekmovalka dobila te ocene, tipa character. Ta stolpec sem dodala ko sem tabele združila ve eno.  

  - stolpec **"DA"**
    -stolpec z seštevkom tehničnih vrednostih z rekvizitom, tipa numeric.

  - stolpec **"DB"**
    -stolpec z seštevkom tehničnih vrednostih z telesom, tipa numeric. 

  - stolpec **"EA"**
    -stolpec z odbitkom kompozicijskih izvedbenih napak, tipa numeric.

  - stolpec **"ET"**
    -stolpec z odbitkom tehničnih izvedbenih napak, tipa numeric. 

  - stolpec **"Pen"**
    -stolpec z odbitkom sodnice koordinatorke, časomerilk in linijskih sodnic , tipa numeric.  

  
  **OPOMBA**: končna ocena je sestavlejena iz ocene težavnosti, odbitka izvedbenih napak in odbitkov s strani sodnice koordinatorke, časomerilke in linijskih sodnic. Ocena       težavnosti je sestavljena iz dveh komponent (težine s telesom in težine z rekvizitom). Odbitek izvedbenih napak se odšteje od 10.00 točk in nato prišteje končni oceni.   
  
* Tabela **ecg**
  - stolpec **"Tekmovalka"**
    -stolpec z imenom in priimkom tekmovalke, tipa character.

  - stolpec **drzava**
    -stolpec z kratico države, ki jo tekomovalka zastopa, tipa character.

  - stolpec **"rekvizit"**
    -stolpec, ki pove s katerim rekvizitom je tekmovalka dobila te ocene, tipa character. 

  - stolpec  **"tekma"**
    -stolpec, ki pove na kateri tekmi je tekmovalka dobila te ocene, tipa character. 

  - stolpec **"E"**
    -stolpec z odbitkom izvedbenih napak, tipa numeric.  

  - stolpec **"D"**
    -stolpec z seštevkom tehničnih vrednostih, tipa numeric. 

  - stolpec **"Pen"**
    -stolpec z odbitkom sodnice koordinatorke, časomerilk in linijskih sodnic , tipa numeric.  

  - stolpec **"koncna_ocena"**
    -stolpec s koncno oceno, tipa numeric. 
  
* Tabela skupinske
  - stolpec **"drzava"**
    -stolpec z imenom države, ki jo tekomovalke zastopajo, tipa character.

  - stolpec **"E"**
    -stolpec z odbitkom izvedbenih napak, tipa numeric.  

  - stolpec **"D"**
    -stolpec z seštevkom tehničnih vrednostih, tipa numeric. 

  - stolpec **"Pen"**
    -stolpec z odbitkom sodnice koordinatorke, časomerilk in linijskih sodnic , tipa numeric.  

  - stolpec **"koncna_ocena"**
    -stolpec s koncno oceno, tipa numeric.

  - stolpec **"rekvizit"**
    -stolpec, ki pove s katerim rekvizitom so tekmovalke dobile te ocene, tipa character. 

  - stolpec  **"tekma"**
    -stolpec, ki pove na kateri tekmi so tekmovalke dobile te ocene, tipa character. 

***

## Analiza in vizualizacija podatkov

```{r vizualizacija, echo=FALSE, message=FALSE, warning=FALSE, results='hide'}
source("vizualizacija/vizualizacija.r", encoding="UTF-8")
```
Pred analizo teh podatkov sem si zastavila naslednja vprašanja:

- Kako se je skozi olimpijski cikel spreminjala vrednost ocen (skupne in D)?
- Kako se je vrednost AD spreminjala skozi olimpijski cikel za posamezno tekmovalko in posamezen rekvizit?
- Pri katerem rekvizitu tekmovalke dobijo največji odbitek za izvedbo?

1. graf prikazuje dvig ocen skozi oliimpijski cikel.

```{r graf1, echo=FALSE, fig.align='center'}
graf1
```

2. graf prikazuje vrednosti težin z rekvizitom
```{r graf3, echo=FALSE, fig.align='center'}
graf3
```

3. graf prikazuje vrednost izvedbenega odbitka E
```{r graf4, echo=FALSE, fig.align='center'}
graf4
```

Spodnji zemljevid prikazuje države z tekmovalkami v finalih.

```{r zemljevid_najvisjih_ocen, echo=FALSE, message=FALSE, warning=FALSE,fig.align='center', fig.cap='Države z najvišjo oceno v finalih'}
 zemljevid_najvisjih_ocen
```

***



# Napredna analiza podatkov

```{r analiza, echo=FALSE, message=FALSE}
source("analiza/analiza.r", encoding="UTF-8")
```

Spodnji graf prikazuje povezavo med številom naselij in površino občine.

```{r graf, echo=FALSE, fig.align='center', fig.cap='Povezava med številom naselij in površino občine'}
ggplot(inner_join(obcine, data.frame(obcina=names(skupine),
                                     skupina=factor(skupine)), by="obcina")
, aes(x=povrsina, y=naselja, color=skupina, size=prebivalci/1000)) + geom_point() +
  ggtitle("Število naselij glede na površino občine") +
  xlab(expression("Površina (km"^2 * ")")) + ylab("Št. naselij") +
  guides(color=guide_legend(title="Skupina"),
         size=guide_legend(title="Prebivalci (* 1000)"))
```

***

#```{r shiny, echo=FALSE}
#shinyAppDir("shiny", options=list(width="100%", height=600))
```
